<!DOCTYPE html>
<html>

<head>
<style>
select {
	width: 100px;
	padding: 6px;
	border: none;
	border-radius: 5px;
	background-color: #cccccc;  
	font-size:18px;
}
.overlay {
	position: fixed;
	width: 100%;
	height: 100%;
	left: 0;
	top: 0;	
	z-index: 10;
	
	background: rgba(40,40,40, 0.95);
	border-radius: 18px;

	font: bold 40px Arial, sans-serif;
	text-align: center;
	color:rgb(255,255,255);
	cursor: pointer;

	display:none;
}
</style>

</head>







<body>

<div id="myOverlay" class='overlay' onclick="hideOverlay()">
	<div style="width:80%; margin-left:10%; margin-top:15px; border: 1px solid gray;">PLAY AUDIO</div>
</div>  

<div style=" ">

  <span>
    <audio id="myAudio" controls autoplay onended="onAudioEnd()" 
		onloadstart="loadStatus()" oncanplay=""
		style="position: relative; top:10px; width:340px; transform: scaleY(1.0);">
      <!-- <source src="https://rawgit.com/chrismcg61/TechDemos/master/Media/PianoMin_C7.wav"/> -->
      <source src="https://rawgit.com/chrismcg61/TechDemos/master/Media/OST_BSG.mp4"/>
    </audio>
  </span>
  
  
  <span style="font-size:30px;">
    <select id="mySelect" onchange="selectSrc()">
      <option value="https://rawgit.com/chrismcg61/TechDemos/master/Media/OST_BSG.mp4">Track 1</option>
      <option value="https://rawgit.com/chrismcg61/TechDemos/master/Media/OST_SGU.mp4">Track 2</option>
      <option value="https://rawgit.com/chrismcg61/TechDemos/master/Media/OST_BR2047.mp4">Track 3</option>
      <option value="https://rawgit.com/chrismcg61/TechDemos/master/Media/OST_IST.mp4">Track 4</option>
      <option value="https://rawgit.com/chrismcg61/TechDemos/master/Media/OST_IST_22.mp4">Track 5</option>
      <option value="https://rawgit.com/chrismcg61/TechDemos/master/Media/OST_IST_14.mp4">Track 6</option>
    </select>
  </span>


</div>



</body>


<script>
//selectSrc();
myAudio.volume = 0.25; 
//setTimeout( function(){myAudio.play()} , 2000 )	
tryPlay()
function tryPlay(){
	try {
		//nonExistentFunction();
		let startPlayPromise = myAudio.play();
		if (startPlayPromise !== undefined) {
		 startPlayPromise.then(() => {
		}).catch(error => {
		    	if (error.name === "NotAllowedError") {
				//if (confirm('Play Background Music?')) {
				//	setTimeout( tryPlay , 2000 )	
				//}
				myOverlay.style.display = "block";
			}
			else{ 
				console.error(error);
				setTimeout( tryPlay , 2000 )	
			}
		  });
		}
	} catch (error) {
		console.error(error);
		setTimeout( tryPlay , 2000 )	
	}
}
	
function loadStatus(){
	//alert('onloadstart');
}

function selectSrc(){
  myAudio.src = mySelect.value;  
}
function onAudioEnd() {
  //alert("The audio has ended");
  var selectedIndex = parseInt(mySelect.selectedIndex);
  selectedIndex++;
  if(selectedIndex >= mySelect.length) selectedIndex = 0;  // 0/-1 -> Loop Playlist Mode
  
  mySelect.selectedIndex = selectedIndex.toString();
  selectSrc();
}
	
function hideOverlay(){
	setTimeout( tryPlay , 2000 )	
	myOverlay.style.display = "none";
}
</script>


</html>
