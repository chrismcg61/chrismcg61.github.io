<!DOCTYPE html>
<html>
<body>
<head>
	<title>THREEJS DEMO1</title>
</head>



  
  
<script type="module">
import * as THREE from 'https://cdn.rawgit.com/mrdoob/three.js/r157/build/three.module.js';


var renderer = new THREE.WebGLRenderer( { antialias:false } );
document.body.appendChild( renderer.domElement );  
renderer.setSize( 800,800 );  //renderer.setPixelRatio( window.devicePixelRatio )

var camera = new THREE.PerspectiveCamera( 70, 800/800, 0.01, 900 );
var scene = new THREE.Scene();

{
  var waterBumpMap = new THREE.TextureLoader().load("https://cdn.rawgit.com/mrdoob/three.js/r156/examples/textures/water/Water_1_M_Normal.jpg")
  waterBumpMap.anisotropy=8;  waterBumpMap.repeat.set( 1,1 );  waterBumpMap.wrapS=waterBumpMap.wrapT=THREE.RepeatWrapping;
  
  renderer.shadowMap.enabled = true;
  scene.background = new THREE.Color( 0x000044 );
  camera.position.set( 0,0.5,3 )

  var directionalLight = new THREE.DirectionalLight( 0xffffff, 1.5 );
  directionalLight.receiveShadow = directionalLight.castShadow = true;
  scene.add( directionalLight );  directionalLight.position.set( 1,1,1 ); 

  var ground = new THREE.Mesh(new THREE.PlaneGeometry(6,6, 100,100),  new THREE.MeshStandardMaterial({displacementMap:waterBumpMap,displacementScale:0.3}) );
  ground.position.y = -0.1;   ground.rotation.x = -Math.PI/2;
  ground.receiveShadow = true;  //ground.castShadow =
  scene.add( ground );

  const pLight = new THREE.PointLight( 0xff0000, 1.9, 6, 1.1 );
  pLight.receiveShadow = pLight.castShadow = true;  pLight.shadow.camera.near = 0.01;
  scene.add( pLight );  pLight.position.set( 0,0.3,0.8 );
  //
  var myMesh = new THREE.Mesh( new THREE.BoxGeometry(), new THREE.MeshStandardMaterial({bumpMap:waterBumpMap,bumpScale:0.05,roughness:0.3,metalness:0.7}) );
  myMesh.receiveShadow = myMesh.castShadow = true
  scene.add(myMesh);  myMesh.position.set( 0,0.6,0 );
  scene.rotMesh = myMesh
}


animate();
function animate() {
  scene.rotMesh.rotation.y += 0.005
  //
  renderer.render( scene, camera );
  requestAnimationFrame( animate );
}
</script>


  
</body>
</html>
